# 전자식 기술 교범(IETM) 검색증강 RAG 및 SLM 기반 시스템 구축 프로젝트

## I. 프로젝트 개요
본 프로젝트의 목표는 전자식 기술 교범(IETM)의 검색 기능을 고도화하기 위해 검색증강(Retrieval-Augmented Generation, RAG)과 소형언어모델(Small Language Model, SLM)을 활용한 대화형 검색 시스템을 개발하는 것입니다.

### 주요 목표
1. **PDF 데이터 처리 및 청크화**:
   - 다양한 PDF 파일에서 정보를 추출하고 텍스트 청크로 분할.
2. **임베딩 생성 및 검색 기능 구현**:
   - SentenceTransformer 기반 임베딩 생성.
   - ChromaDB를 사용한 검색 기능.
3. **RAG 기반 대화형 검색 시스템**:
   - 검색 결과와 통합된 답변 생성.
   - Hugging Face 모델 및 사용자 지정 파이프라인을 활용하여 답변 생성.
4. **시스템 테스트**:
   - 다양한 사용자 쿼리 시나리오에 대한 검색 및 답변 품질 평가.

---

## II. 구현 내용

### 1. 데이터 처리
- **PDF 파일 로드**:
  - `pymupdf` 및 `pdfplumber`를 사용하여 PDF 텍스트를 추출.
  - 두 가지 방법 중 텍스트 품질이 높은 것을 선택.
- **텍스트 청크 분할**:
  - RecursiveCharacterTextSplitter를 사용해 텍스트를 청크로 나누고, 청크 간 중복을 최소화하기 위해 1000자 단위로 처리.

### 2. 임베딩 생성
- **SentenceTransformer**:
  - `jhgan/ko-sroberta-multitask` 모델을 사용해 청크를 벡터화.
  - 생성된 임베딩은 검색 성능을 높이기 위해 활용.

### 3. 데이터베이스 구축
- **ChromaDB**:
  - 청크와 임베딩 데이터를 컬렉션으로 저장.
  - 메타데이터와 원본 텍스트를 포함한 문서 구조 유지.

### 4. 검색 및 생성
- **검색 기능**:
  - 사용자 쿼리에 대한 임베딩을 생성하고, ChromaDB에서 가장 관련성 높은 청크를 검색.
- **답변 생성**:
  - 검색된 결과를 기반으로 Hugging Face의 `KONI-Llama3-8B-Instruct` 모델로 대화형 응답 생성.
  - 사용자 입력 및 검색된 컨텍스트를 통합한 프롬프트 구성.

---

## III. 프로젝트 결과

### 시스템 성능
1. **임베딩 저장**:
   - 총 379개의 문서 청크와 임베딩이 성공적으로 데이터베이스에 저장.
2. **검색 결과**:
   - 사용자의 다양한 쿼리에 대해 상위 5개의 관련 문서를 검색.
3. **답변 품질**:
   - 검색된 문서를 기반으로 답변을 생성해야 하나 좋은 결과를 얻지는 못함.

---

## IV. 회고

### 성과
1. **검색증강(RAG) 구현 성공**:
   - PDF 텍스트 추출부터 임베딩 생성 및 검색까지 RAG 파이프라인을 완성.
2. **대화형 시스템 개발**:
   - 자연스러운 대화형 답변을 얻지는 못함.

### 아쉬운 점
1. **모델 크기와 성능**:
   - KONI-Llama3-8B 모델의 크기로 인해 높은 메모리 요구 사항이 발생.
2. **데이터 다양성 부족**:
   - PDF 데이터의 주제가 특정 도메인에 한정되어 있어 일반화 성능에 한계.
3. **검색 속도 개선 필요**:
   - 대규모 데이터셋에서 검색 속도 최적화 필요.

### 개선 방향
1. **경량화 모델 활용**:
   - SLM 기반 경량 모델로 전환하여 리소스 요구량 감소.
2. **데이터 확장**:
   - 다양한 도메인 및 형식의 PDF 데이터 추가.
3. **검색 및 생성 최적화**:
   - 빠른 검색을 위한 인덱스 최적화 및 답변 생성을 위한 프롬프트 개선.

---

## V. 결론
본 프로젝트는 IETM 시스템의 검색 기능을 RAG와 SLM 기술로 고도화하는 데 성공하며, 대화형 검색 기능을 제공할 수 있는 기반을 마련하였나, 좋은 결과를 얻지는 못함. 향후 개선 작업을 통해 더 높은 품질의 검색 및 대화 시스템으로 발전시켜야 할듯함.
